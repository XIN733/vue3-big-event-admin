import{r as p,d as v,o as E,e as b,f as t,g as e,h as m,bN as V,E as x}from"./index-db_mjOVI.js";import{a as y,E as P}from"./el-col-fvDdf1HD.js";import{E as z,a as C}from"./el-form-item-RIJoy0w7.js";import{E as F}from"./_plugin-vue_export-helper-Dg3XgOsB.js";import{E as N}from"./el-input-MxmvzWj_.js";import{P as R}from"./PageContainer-C7DIgtre.js";import"./_baseClone-kySqY0Uo.js";const A={__name:"UserPassword",setup(U){const d=p(),l=p({old_pwd:"",new_pwd:"",re_pwd:""}),_=v({old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是 6-15位 的非空字符",trigger:"blur"},{validator:(u,r,o)=>{r===l.value.old_pwd?o(new Error("新密码不能和旧密码一样")):o()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{validator:(u,r,o)=>{r!==l.value.new_pwd?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}]}),i=async()=>{await d.value.validate(),await V(l.value),x.success("修改成功")},w=()=>{d.value.resetFields()};return(u,r)=>{const o=N,s=z,n=F,f=C,g=y,c=P;return E(),b(R,{title:"重置密码"},{content:t(()=>[e(c,null,{default:t(()=>[e(g,{span:12},{default:t(()=>[e(f,{ref_key:"formRef",ref:d,model:l.value,rules:_,"label-width":"100px"},{default:t(()=>[e(s,{label:"原密码",prop:"old_pwd"},{default:t(()=>[e(o,{modelValue:l.value.old_pwd,"onUpdate:modelValue":r[0]||(r[0]=a=>l.value.old_pwd=a),type:"text",size:"large"},null,8,["modelValue"])]),_:1}),e(s,{label:"新密码",prop:"new_pwd"},{default:t(()=>[e(o,{modelValue:l.value.new_pwd,"onUpdate:modelValue":r[1]||(r[1]=a=>l.value.new_pwd=a),type:"text",size:"large"},null,8,["modelValue"])]),_:1}),e(s,{label:"确认新密码",prop:"re_pwd"},{default:t(()=>[e(o,{modelValue:l.value.re_pwd,"onUpdate:modelValue":r[2]||(r[2]=a=>l.value.re_pwd=a),type:"text",size:"large"},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(n,{type:"primary",size:"large",onClick:i},{default:t(()=>[m("修改密码")]),_:1}),e(n,{t:"",size:"large",onClick:w},{default:t(()=>[m("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1})}}};export{A as default};
