import{o as V,c as N,a as t,u as H,b as P,r as _,d as w,w as T,e as y,f as s,g as e,h,i as j,E as U,j as A,k as D,p as G,l as J}from"./index-db_mjOVI.js";import{E as K,a as O}from"./el-col-fvDdf1HD.js";import{E as Q,a as W}from"./el-form-item-RIJoy0w7.js";import{E as X}from"./el-link-2c7DaLTn.js";import{_ as Y,E as Z}from"./_plugin-vue_export-helper-Dg3XgOsB.js";import{E as ee}from"./el-checkbox-Z9ODTjiI.js";import{E as se}from"./el-input-MxmvzWj_.js";import{_ as oe}from"./user-EDlQ6REO.js";import"./_baseClone-kySqY0Uo.js";import"./isEqual-WJw22_c8.js";const ae={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},le=t("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96"},null,-1),te=t("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32m192-160v-64a192 192 0 1 0-384 0v64zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64"},null,-1),re=[le,te];function ne(d,E){return V(),N("svg",ae,[...re])}const ue={name:"ep-lock",render:ne},k=d=>(G("data-v-16d3f91a"),d=d(),J(),d),ie=k(()=>t("h1",null,"登录",-1)),de={class:"icon"},pe={class:"icon"},ce={class:"choose"},me=k(()=>t("div",{class:"text"},"忘记密码？",-1)),_e=k(()=>t("div",{class:"tip"}," 为保障您的个人信息安全，请勿向平台录入任何个人敏感信息（如手机号、身份证号等）！ ",-1)),fe=k(()=>t("h1",null,"注册",-1)),ge={class:"icon"},ve={class:"icon"},we={class:"icon"},he={__name:"LoginPage",setup(d){const E=H(),C=P(),p=_(1),r=_(!1),f=_(),n=w({username:"",password:"",repassword:""}),I=w({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"用户名必须是 5-10位 的字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是 6-15位 的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(u,o,c)=>{o!==n.password?c(new Error("两次输入密码不一致")):c()},trigger:"blur"}]}),z=async()=>{r.value=!0,await f.value.validate(),await j(n).then(()=>{r.value=!1,U.success("注册成功"),p.value=1,f.value.resetFields()}).catch(()=>{r.value=!1})},g=_(),i=w({username:"",password:""}),v=_(!1),$=w({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"用户名必须是 5-10位 的字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是 6-15位 的非空字符",trigger:"blur"}]}),B=async()=>{r.value=!0,await g.value.validate(),await A(i).then(async u=>{E.setToken(u.token),q(),C.push("/"),U.success("登录成功"),r.value=!1,g.value.resetFields(),v.value=!1}).catch(()=>{r.value=!1})},q=async()=>{const{data:u}=await D();E.setUserInfo(u)};return T(p,u=>{r.value=!1,u===1?f.value.resetFields():(g.value.resetFields(),v.value=!1)}),(u,o)=>{const c=O,a=Q,b=oe,m=se,x=ue,L=ee,F=Z,R=X,S=W,M=K;return V(),y(M,{class:"container"},{default:s(()=>[e(c,{span:12,class:"left"}),e(c,{span:12,class:"right"},{default:s(()=>[p.value===1?(V(),y(S,{key:0,model:i,ref_key:"loginFormRef",ref:g,rules:$,class:"form"},{default:s(()=>[e(a,null,{default:s(()=>[ie]),_:1}),e(a,{prop:"username"},{default:s(()=>[e(m,{modelValue:i.username,"onUpdate:modelValue":o[0]||(o[0]=l=>i.username=l),size:"large",placeholder:"请输入用户名"},{prefix:s(()=>[t("div",de,[e(b)])]),_:1},8,["modelValue"])]),_:1}),e(a,{prop:"password"},{default:s(()=>[e(m,{modelValue:i.password,"onUpdate:modelValue":o[1]||(o[1]=l=>i.password=l),size:"large",type:"password",placeholder:"请输入密码"},{prefix:s(()=>[t("div",pe,[e(x)])]),_:1},8,["modelValue"])]),_:1}),e(a,null,{default:s(()=>[t("div",ce,[e(L,{modelValue:v.value,"onUpdate:modelValue":o[2]||(o[2]=l=>v.value=l),label:"记住我",size:"large"},null,8,["modelValue"]),me])]),_:1}),e(a,null,{default:s(()=>[e(F,{type:"primary",class:"submit",onClick:B,loading:r.value},{default:s(()=>[h("登录")]),_:1},8,["loading"])]),_:1}),e(a,null,{default:s(()=>[e(R,{type:"info",underline:!1,onClick:o[3]||(o[3]=l=>p.value=2)},{default:s(()=>[h("注册 →")]),_:1})]),_:1}),e(a,null,{default:s(()=>[_e]),_:1})]),_:1},8,["model","rules"])):(V(),y(S,{key:1,model:n,ref_key:"registerFormRef",ref:f,rules:I,class:"form"},{default:s(()=>[e(a,null,{default:s(()=>[fe]),_:1}),e(a,{prop:"username"},{default:s(()=>[e(m,{modelValue:n.username,"onUpdate:modelValue":o[4]||(o[4]=l=>n.username=l),size:"large",placeholder:"请输入用户名"},{prefix:s(()=>[t("div",ge,[e(b)])]),_:1},8,["modelValue"])]),_:1}),e(a,{prop:"password"},{default:s(()=>[e(m,{modelValue:n.password,"onUpdate:modelValue":o[5]||(o[5]=l=>n.password=l),size:"large",type:"password",placeholder:"请输入密码"},{prefix:s(()=>[t("div",ve,[e(x)])]),_:1},8,["modelValue"])]),_:1}),e(a,{prop:"repassword"},{default:s(()=>[e(m,{modelValue:n.repassword,"onUpdate:modelValue":o[6]||(o[6]=l=>n.repassword=l),size:"large",type:"password",placeholder:"请再次输入密码"},{prefix:s(()=>[t("div",we,[e(x)])]),_:1},8,["modelValue"])]),_:1}),e(a,null,{default:s(()=>[e(F,{type:"primary",class:"submit",onClick:z,loading:r.value},{default:s(()=>[h("注册")]),_:1},8,["loading"])]),_:1}),e(a,null,{default:s(()=>[e(R,{type:"info",underline:!1,onClick:o[7]||(o[7]=l=>p.value=1)},{default:s(()=>[h("← 返回")]),_:1})]),_:1})]),_:1},8,["model","rules"]))]),_:1})]),_:1})}}},Ie=Y(he,[["__scopeId","data-v-16d3f91a"]]);export{Ie as default};
