import{o as d,c as I,a as l,u as L,r,e as v,f as a,g as o,v as R,Z as V,bB as x,E as p,p as S,l as z}from"./index-ushgDT-n.js";import{a as $,E as j}from"./el-col-1yWjAWz-.js";import{_ as M,E as N}from"./plus-4U8SdHSG.js";import{_ as P,E as T}from"./_plugin-vue_export-helper-ZfFOaELi.js";import{P as q}from"./PageContainer-LTXPq31b.js";import"./_baseClone-QOsmlMf-.js";import"./isEqual-KDKYuaUO.js";const D={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},H=l("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64m384-578.304V704h-64V247.296L237.248 490.048L192 444.8L508.8 128l316.8 316.8l-45.312 45.248z"},null,-1),J=[H];function O(s,c){return d(),I("svg",D,[...J])}const W={name:"ep-upload",render:O},Z="/vue3-big-event-admint/dist/assets/avatar-kJTWkE7i.jpg",g=s=>(S("data-v-e6e0aa6c"),s=s(),z(),s),F=["src"],G=g(()=>l("span",null,"选择图片",-1)),K=g(()=>l("span",null,"上传头像",-1)),Q={__name:"UserAvatar",setup(s){const{userInfo:{user_pic:c},getUserInfo:h}=L(),_=r(c||""),f=r(),w=()=>{f.value.$el.querySelector("input").click()},n=r(!1),U=e=>e.type!=="image/jpeg"?(p.error("上传图片格式错误"),!1):e.size/1024/1024>2?(p.error("图片应小于2MB"),!1):!0,i=r(c||""),E=async e=>{await U(e.raw)&&(i.value=URL.createObjectURL(e.raw),k(e.raw))},k=e=>{const t=new FileReader;t.readAsDataURL(e),t.onload=()=>{_.value=t.result},t.onerror=function(u){console.log(u)}},y=async()=>{n.value=!0,await x(_.value),h(),n.value=!1,p.success("上传成功")};return(e,t)=>{const u=M,m=T,B=W,A=N,b=$,C=j;return d(),v(q,{title:"更换头像"},{content:a(()=>[o(C,null,{default:a(()=>[o(b,{span:12},{default:a(()=>[o(A,{ref_key:"uploadRef",ref:f,class:"avatar-uploader","auto-upload":!1,"show-file-list":!1,"on-change":E},{trigger:a(()=>[l("img",{src:i.value?i.value:R(Z),class:"avatar"},null,8,F)]),default:a(()=>[o(m,{type:"primary",size:"large",onClick:w},{default:a(()=>[o(u),G]),_:1}),o(m,{type:"success",size:"large",disabled:!_.value,onClick:y,loading:n.value},{default:a(()=>[n.value?V("",!0):(d(),v(B,{key:0})),K]),_:1},8,["disabled","loading"])]),_:1},512)]),_:1})]),_:1})]),_:1})}}},ne=P(Q,[["__scopeId","data-v-e6e0aa6c"]]);export{ne as default};
